@{ ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_EcommerceLayout.cshtml";
}



<style>

    /*Maintaining txtarea or text box height when cell is going to be edited by fahad*/
    /*    button, input, optgroup, select, textarea, text {
        margin: 0;
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
        width: 100%;
    }*/

    /*   * {
        box-sizing: border-box;
    }*/

    #myInput {
        background-image: url('../../Content/css/searchicon.png');
        background-position: 10px 5px;
        background-repeat: no-repeat;
        width: 75%;
        padding: 11px 20px 13px 40px;
        border: 1px solid #ddd;
        /*font-size: 16px;
        margin-bottom: 12px;*/
    }

    #myInputSearch {
        background-image: url('../../Content/css/searchicon.png');
        background-position: 10px 5px;
        background-repeat: no-repeat;
        width: 100%;
        padding: 18px 20px 8px 40px;
        border: 1px solid #ddd;
        text-align: center;
        font-size: 22px;
        margin-bottom: 12px;
    }

    /*button, input, optgroup, select, textarea, text {
        margin: 0;
        font-family: inherit;
        font-size: 20px;
        line-height: inherit;
        width: 20%;
    }*/


    button.add, .sub {
        /*  margin: 4px;*/
        /* width: 20px;*/
        cursor: pointer;
    }

    .field {
        text-align: center;
        width: 40px;
        margin: 4px;
        color: salmon;
    }

    .hidden {
        display: none;
    }


    .cards tbody tr {
        float: left;
        padding: 5px;
        width: 13%; /*15.9rem;*/
        margin: 0.3rem;
        border: 0.0625rem solid rgba(0,0,0,.125);
        border-radius: .25rem;
        box-shadow: 0.25rem 0.25rem 0.5rem rgba(0,0,0,0.25);
        height: 134px;
        text-align: center
    }

    .cards tbody td {
        display: block;
    }

    /*.table tbody label {
        display: none;
    }*/

    .cards tbody label {
        display: inline;
        position: relative;
        font-size: 85%;
        top: -0.5rem;
        float: left;
        color: #808080;
        min-width: 4rem;
        margin-left: 0;
        margin-right: 1rem;
        text-align: left;
    }

    tr.selected label {
        color: #404040;
    }

    /*.table .fa {
        font-size: 2.5rem;
        text-align: center;
    }*/

    .cards .fa {
        /*font-size: 7.5rem;*/
        font-size: 1.5rem;
    }

    #tblproductsearch img {
        height: 80px !important;
        width: auto;
    }
    /*
    #tblproductsearch .searchproductimage img:hover {
        -moz-transform: scale(1.1) rotate(.01deg);
        -webkit-transform: scale(1.1) rotate(.01deg);
        transform: scale(1.1) rotate(.01deg);
    }*/

    table tr:hover {
        cursor: pointer;
    }
    /* For all tables*/
    table.sortable tr:hover {
        cursor: pointer;
    }

    .table-hover tbody tr:hover td, .table-hover tbody tr:hover th {
        background: no-repeat;
    }

    .table-sm th {
        font-size: 13px;
        font-weight: bold;
    }

    .table-sm td {
        font-size: 11.5px;
    }

    .SmallInput {
        /*    width: 50px;*/
        /*height: 10px;*/
        font-size: 12px;
        margin-bottom: 0px;
    }

    .select2-container {
        font-size: 12px;
    }
    /*    .select2fontsize {
        font-size: 12px;
    }*/

    /*    .select2-container {
        font-size: 12px !important;
    }*/
    /*    .table-hover tbody tr:hover {
        select2-container

        color: #212529;
        background-color: rgba(0,0,0,.075) !important;
    }*/
    /* only for this one*/


    .select2-selection {
        overflow: hidden !important;
        height: 32px !important;
        /*vertical-align:middle;*/
    }

    .dataTables_wrapper table thead {
        display: none;
    }

    /*.select2-container--default .select2-selection--single .select2-selection__rendered,
    .select2-container--default .select2-selection--single .select2-selection__arrow {*/
    /*    color: #444;
    line-height: 28px;*/
    /*margin-top: 4px;
    }*/


</style>


@*<link href="~/AdminEla/Assets/css/lib/select2/select2.min.css" rel="stylesheet" />*@
<div class="container" style="margin-top:100px">

    <div class="col-md-12 col-12 mb-2 order-md-1">
        <div class="card p-2">
            <div class="row">
                <div class="col-md-6 col-12">
                    <div class="input-group  mb-1">

                                 <div class="input-group-prepend">
                                            <span class="input-group-text bg-purple text-white">
                                                <i class="fa fa-search "></i>
                                            </span>
                                        </div>

  @*                      <div class="input-group-prepend">
                            <span id="btToggleDisplay" class="btn btn-primary">
                                <i class="fa fa-table" aria-hidden="true"></i>
                                <i class="fa fa-arrows-h" aria-hidden="true"></i>
                                <i class="fa fa-id-card-o" aria-hidden="true"></i>
                            </span>
                        </div>*@
                        <input type="text" id="myInput" class="form-control form-control-sm" onkeyup="myFunction()" onmouseover="this.focus();" placeholder="Search for names.." title="Type in a name">
                    </div>
                </div>
                <div class="col-md-6 col-12">
                    <div class="input-group  mb-1" id="divCategory">
                        <div class="input-group-prepend">
                            <span class="input-group-text py-0">
                                Category
                            </span>
                        </div>
                        @Html.DropDownList("Category", ViewBag.Category as List<SelectListItem>, new { id = "Category", @class = "form-control" })
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-md-12 col-12">
                    <table id="tblproductsearch" class="tbl display table-hover no-footer text-center" width="100%" style="font-weight:bold ; font-size:10px;" font-family:"Arial Narrow", Arial, sans-serif;">
                    </table>
                </div>
            </div>
        </div>
    </div>






    <br />
</div>

@*<script src="~/AdminEla/Assets/js/lib/jquery/jquery.min.js"></script>
<script src="~/AdminEla/Assets/js/lib/select2/select2.full.min.js"></script>
<script src="~/AdminEla/Assets/js/lib/datatables/datatables.min.js"></script>
<script src="~/AdminEla/Assets/js/lib/datatables/datatables-init.js"></script>*@
@section Scripts{
    <script type="text/javascript">

        $("#tblproductsearch").toggleClass('cards');
        $("#tblproductsearch thead").toggle();


        $('#btToggleDisplay').on('click', function () {
            event.preventDefault();
            $("#tblproductsearch").toggleClass('cards');
            $("#tblproductsearch thead").toggle();
            //e.preventDefault();

        })
         

        $('#myform').submit(function () {
            $('select').removeAttr('disabled');
            //alert('ok');
        });

        //$(".entry-form input[type='text']").each(function () {
        //    $(this).val("");
        //});

        var tblproductsearch;

  

            function myFunction() {

                ///var oTable = $('#tblproductsearch').DataTable();   //pay attention to capital D, which is mandatory to retrieve "api" datatables' object, as //Lionel said
                $('#myInput').keyup(function () {
                    tblproductsearch.search($(this).val()).draw();
                })


            }



            $(document).ready(function () {

                CategorySearch(0);
                //$('.dataTables_wrapper').addClass('col-md-12'); // <-- add this line

                $("#Category").change(function () {
                    tblproductsearch.destroy();
                    CategorySearch($('#Category').val());
                });

                //$('#Category').select2({})
                //    .on("select2:select", function (e) {

                //        tblproductsearch.destroy();
                //        //alert(('#Category').val());
                //        CategorySearch($('#Category').val());

                //    });

      

                function CategorySearch(CategoryId) {

                    //alert(CategoryId);
                    ///var oTable = $('#tblproductsearch').DataTable();   //pay attention to capital D, which is mandatory to retrieve "api" datatables' object, as //Lionel said

                    //var CategoryId = $("#categorygrid tbody tr.selected td:nth-child(2)").text();

                    tblproductsearch = $('#tblproductsearch').DataTable({
                        serverSide: true,  "scrollX": true,
                        processing: true,

                        //"bInfo" : false,
                        //searchDelay: 1,
                        ajax: {
                            url: '@Url.Action("GetProductListClick", "Home")',
                            "data": { CategoryId: CategoryId },

                            type: "POST"
                        },
                        //success: function (data) {
                        //    //console.log(data);
                        //    //alert(data);
                        //},

                        columns: [

                            { "title": "ProductId", "data": "ProductId", "visible": false, "searchable": false, "sclass": "productidsubs" },
                            { "title": "CategoryId", "data": "CategoryId", "visible": false, "searchable": false },

                            {
                                "title": "Image", "data": "ImagePath", "searchable": false
                                , "render": function (data) {
                                    //console.log(data);
                                    //return '<img src="..' + data + '" class="img-thumbnail" width="80px">';

                                    var saleidedit = $("#Id").val();
                                    //alert(data);
                                    if (saleidedit > 0) {
                                        return '<img src="../..' + data + '" class="img-thumbnail" width="80px" onerror=this.onerror=null;this.src="../../Content/ProductImages/0.png">';

                                    }
                                    else {
                                        //console.log(data);
                                        return '<img src="' + data + '" class="img-thumbnail" width="80px" onerror=this.onerror=null;this.src="../Content/ProductImages/0.png">';

                                    }
                                }
                            },

                            {
                                "title": "Product", "data": "ProductName", "searchable": true, "render": function (data) {
                                    var res = data.toString().replace(".", " ").substring(0, 17).toString();
                                    //alert(res);
                                    //res.toString().replace(".", "&nbsp;");
                                    var finaltext = res;//pad(res, 17);

                                    //console.log(finaltext);
                                    return finaltext;
                                }
                            },

                            //{ "title": "Product", "data": "ProductName", "searchable": true },
                            { "title": "Barcode", "data": "ProductBarcode", "visible": true, "searchable": true },

                            { "title": "SalePrice", "data": "SalesPrice", "visible": false, "searchable": false },

                            { "title": "ProductId", "data": "ProductId", "visible": false, "searchable": false }

                        ],
                        "paging": true,
                        "ordering": false,
                        "searching": true,
                        'select': true,
                        language: {
                            sLengthMenu: " _MENU_",
                            search: '',
                            searchPlaceholder: "Search..."
                        },
                        "bSortable": false ,
                        "info": true,
                        "iDisplayLength": 25,
                        "lengthMenu": [[4, 5, 8, 10, 12, 25, 50, -1], [4, 5, 8, 10, 12, 25, 50, "All"]],  
                        //dom: '<"float-left"B>rt<"row"<"col-sm-4"l><"col-sm-4"i><"col-sm-4"p>>'
                        dom: '<"float-left">rt<"row"<"col-sm-2"l><"col-sm-10"i><"col-sm-12"p>>'

                    });
                }

            });


    </script>

}
