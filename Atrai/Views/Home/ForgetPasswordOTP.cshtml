@model Atrai.Model.Core.ViewModel.ForgetPasswordOTPViewModel
@{
    ViewData["Title"] = "Forget Password";
    //string weburl = ViewBag.weburl;
}



        <form id="myform" asp-action="ForgetPasswordOTP" asp-controller="Home" method="post">
<div class=" mt-4 pt-4 ">
    <div class="row d-flex justify-content-center mt-4 pt-4">
        <div class="col-md-4 col-12">
            @Html.HiddenFor(model => model.PhoneNo);
@*            @Html.HiddenFor(model => model.OTP);*@
            @Html.HiddenFor(model => model.Email);


                        <div class="col-md-12 my-4">
                            <div class="card shadow border-0 p-5">
                                <div class="card-body">
                                    <h2 class="customHeadline">Check your OTP code</h2>
                                    <p class="text-center">
                                        We sent a OTP code to Your Phone : @Model.PhoneNo and @Model.Email Email Address
                                    </p>
                                    <div class="mb-3">

                                        <div class="mb-2">
                                            <label class="control-label customLebel">OTP Code</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-white border-end-0"><i class="bi bi-lock"></i></span>
                                                @*<input type="password" class="form-control border-start-0 ps-0" placeholder="Enter your OTP code" />*@
                                                <input type="number" asp-for="OTP" class="form-control border-start-0 ps-0" placeholder="Enter your OTP code" />
                                                <div asp-validation-for="OTP" class="text-danger"></div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="d-grid my-3">
                                        <button type="submit" class="btn btn-primary">Log In</button>
                                    </div>
                                    <div>
                                        <p class="text-center">Didn’t receive the code? <a id="sendagain" href="#" class="text-decoration-none fw-bold">Click to resend</a></p>
                                    </div>
                                </div>
                            </div>
                        </div>



@*
                        <div class="col-md-6 col-12">

                            <h2 class="display-6 font-weight-bold">Please Check Your eMail To Reset Your Password.</h2>
                            <p>To Reset your password please Provide OTP which we have sent to your email address and Phone Number.</p>

                        </div>



                        <div class="col-md-7 col-12">
                            <label asp-for="Email" class="control-label"></label>
                            <input type="Email" asp-for="Email" class="form-control" readonly />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="col-md-7 col-12">
                            <label asp-for="PhoneNo" class="control-label"></label>
                            <input type="text" asp-for="PhoneNo" class="form-control" readonly />
                            <span asp-validation-for="PhoneNo" class="text-danger"></span>
                        </div>
                        <div class="col-md-7 col-12">
                            <label asp-for="OTP" class="control-label"></label>
                            <input type="number" asp-for="OTP" class="form-control" />
                            <span asp-validation-for="OTP" class="text-danger"></span>
                        </div>
                    </div>


                    <div class="form-group row">
                        <div class="col-md-3 col-12">
                            <button id="create" class="btn btn-info btn-block rounded-0" type="submit">Confirm</button>
                        </div>
                        <div class="col-md-3 col-12">
                            @Html.ActionLink("Go To Login Page", "Login", "Home", null, new { @class = "btn btn-sm btn-outline-info btn-block  rounded-0", @id = "btnBack" })
                        </div>
                    </div>*@
                </div>







            </div>
            </div>






        </form>


        @section scripts {
            <script type="text/javascript">



                $(document).ready(function () {
                


                                    $('#sendagain').click(function(event) {
                        

                                        event.preventDefault();   
                                           

                                        ResendOTP();


                                    });

                        function ResendOTP() {

                            var MyAppUrlset = {
                                MyUsefulUrl: '@Url.Action("ResendOTP", "Values", new {EmailorPhone= @Model.PhoneNo } )'
                            }
                            // var EmailString = $('#emailorphone').val();


                            $.ajax({
                                url: MyAppUrlset.MyUsefulUrl,
                                dataType: "json",
                                //data: { EmailorPhone: $('#emailorphone').val()},
                                success: function(data) {
                                    //console.log(data);
                                    //alert('wait');
                                    toastr.success("OTP Send Successfully.");
                                },
                                error: function(xhr, status, error) {
                                    alert("Something Wrong ! Try another time.");
                                },
                            });


                        }

                
                });


            </script>
        }


